@font-face {
  font-family: 'rodin';
  src: url('https://mariocube.com/css/RodinNTLGPro-DB-AlphaNum.woff2') format('woff2'),
       url('https://mariocube.com/css/RodinNTLGPro-DB-AlphaNum.woff') format('woff');
  font-weight: 400;
}

@font-face {
  font-family: 'rodin';
  src: url('https://mariocube.com/css/RodinNTLGPro-B-AlphaNum.woff2') format('woff2'),
       url('https://mariocube.com/css/RodinNTLGPro-B-AlphaNum.woff') format('woff');
  font-weight: 700;
}

/* Global reset + consistent box sizing */
*, *::before, *::after {
  box-sizing: border-box;
}

html, body {
    max-width: 100% !important;
    overflow-x: hidden !important;
    width: 100% !important;
    margin: 0 !important;
    height: 100%;
}

body {
  background: #36393f;
  color: #dcddde;
  font-family: 'rodin', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 16px;
  line-height: 1.45;
}

/* =========================================
   THEME OVERRIDES
   ========================================= */

/* Light Theme */
.light-theme body, .light-theme #wrapper { background: #ffffff !important; color: #2e3338 !important; }
.light-theme .message { border-color: #e3e5e8 !important; }
.light-theme .message:hover { background: rgba(6, 6, 7, 0.02) !important; }
.light-theme .messagecontent { color: #2e3338 !important; }
.light-theme .messagecontent a { color: #5865f2; }

/* Light Theme - Footer Specifics */
.light-theme .message-form-container { background: #ffffff !important; border-top-color: #e3e5e8 !important; }
.light-theme .message-input-container { background: #ebedef !important; border-color: #e3e5e8 !important; }
.light-theme .message-input { color: #060607 !important; }

/* AMOLED Theme */
.amoled-theme body, .amoled-theme #wrapper { background: #000000 !important; color: #ffffff !important; }
.amoled-theme .message { border-color: #333333 !important; background: #000000 !important; }
.amoled-theme .message:hover { background: rgba(255, 255, 255, 0.05) !important; }
.amoled-theme .messagecontent { color: #ffffff !important; }

/* AMOLED Theme - Footer Specifics */
.amoled-theme .message-form-container { background: #000000 !important; border-top-color: #333333 !important; }
.amoled-theme .message-input-container { background: #000000 !important; border-color: #333333 !important; }
.amoled-theme .message-input { color: #ffffff !important; }

/* =========================================
   HEADER & GENERAL LAYOUT
   ========================================= */

#wrapper { height: 100%; width: 100%; }

.menu-button {
  position: fixed;
  top: 16px;
  left: 16px;
  z-index: 1000;
  background: #36393f;
  border: 1px solid #40444b;
  border-radius: 4px;
  padding: 8px;
}
.menu-icon { width: 24px; height: 24px; }

.content-padding {
  padding-left: 0;
  height: 100%;
  position: relative;
}

/* Scrollable Content Area */
.scrollable-content {
  overflow-y: auto;
  padding: 16px;
  padding-bottom: 120px; /* Extra space so messages don't get hidden behind the 2-row footer */
  height: 100%; 
  -webkit-overflow-scrolling: touch;
}

/* =========================================
   MESSAGES
   ========================================= */

.message {
  padding: 8px 16px;
  margin: 0;
  border-bottom: 1px solid #2f3136;
  position: relative;
}
.message:last-child { border-bottom: none; }

.message-header { margin-bottom: 4px; }
.message-author { font-weight: 600; cursor: pointer; margin-right: 8px; font-family: 'rodin', sans-serif; color: #ffffff; }
.message-date { font-size: 12px; color: #72767d; font-family: 'rodin', sans-serif; }
.message-link { text-decoration: none; display: block; }
.messagecontent { color: #dcddde; font-size: 16px; line-height: 20px; font-family: 'rodin', sans-serif; word-wrap: break-word; }

/* Wii/Opera 9 Specific Cleanup */
#msgcontainer > div[style*="display: flex"] { display: none !important; } /* Hide date separators on Wii */
#msgcontainer > .message:last-of-type { border-bottom: none !important; }

/* =========================================
   MESSAGE INPUT BAR (FIXED STACKED LAYOUT)
   ========================================= */

.message-form-container {
    /* Anchors the bar to the bottom */
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    z-index: 9999;
    
    /* Layout: BLOCK (Stacks items vertically to create the 2-row look) */
    display: block !important;
    height: auto;
    
    /* Visuals */
    background-color: #36393f;
    border-top: 1px solid #2f3136;
    padding: 0 !important;
    margin: 0 !important;
}

/* --- ROW 1: The Buttons (Emoji, Draw, Refresh) --- */
.message-buttons-container {
    display: block !important; /* Forces it to be its own row */
    width: 100% !important;
    padding: 6px 8px 2px 8px !important; /* Spacing: Top Side Bottom Side */
    text-align: left; /* Aligns buttons to the left */
    box-sizing: border-box;
}

/* Individual Button Cells */
.message-button-cell {
    display: inline-block !important; /* Sits buttons side-by-side */
    vertical-align: middle;
    margin-right: 12px; /* Space between icons */
    width: auto !important;
}

.icon-button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    width: 32px;
    height: 32px;
    display: block; 
}
.emoji-icon { width: 24px; height: 24px; vertical-align: middle; }

/* --- ROW 2: The Input Form + Send Button --- */
.message-form-container form {
    display: block !important;
    width: 100% !important;
    padding: 4px 8px 8px 8px !important; /* Spacing around the input box */
    margin: 0 !important;
    box-sizing: border-box;
}

.message-input-wrapper {
    width: 100%;
}

/* NOTE: We use display: TABLE here only.
   This ensures the Send button stays perfectly attached to the Input 
   on the same line, even on Wii/Opera 9. */
.message-input-container {
    display: table !important;
    width: 100% !important;
    table-layout: fixed; /* Prevents input from expanding too wide */
    border-collapse: separate;
    border-spacing: 0;
    
    /* Visuals for the Input Bar */
    background: #40444b;
    border-radius: 8px;
    border: 1px solid #40444b;
    overflow: hidden; 
}

/* Cell 1: The Typing Area */
.message-input {
    display: table-cell !important;
    width: 100% !important; /* Takes all available space */
    height: 44px; /* Touch friendly height */
    padding: 0 12px;
    margin: 0;
    border: none;
    background: transparent;
    color: #dcddde;
    font-size: 16px;
    outline: none;
    vertical-align: middle;
}

/* Cell 2: The Send Button */
.send-button {
    display: table-cell !important;
    width: 1px; /* Shrinks to fit text size */
    white-space: nowrap;
    vertical-align: middle;
    padding: 0 20px;
    height: 44px; /* Matches input height */
    
    background: #5865f2;
    color: white;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    border: none;
    border-radius: 0; /* Container handles radius */
    margin: 0;
}

/* =========================================
   EMOJI PICKER
   ========================================= */
#emoji {
  background: #2f3136;
  border: 1px solid #40444b;
  border-radius: 8px;
  padding: 16px;
  margin: 16px; 
}
.emoji-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
}
#emoji button {
  background: none; border: none; cursor: pointer; padding: 8px; border-radius: 4px;
}
#emoji button:hover { background: rgba(255, 255, 255, 0.06); }

/* =========================================
   UTILITIES & EXTRAS
   ========================================= */
a { color: #00aff4; text-decoration: none; }
a:hover { text-decoration: underline; }
img { max-width: 100%; height: auto; }

.reaction { display: inline-flex; padding: 2px 6px; background: #2f3136; border-radius: 4px; margin-right: 4px; }
.reaction img { width: 16px; height: 16px; }
.reaction-count { color: #dcddde; font-size: 12px; margin-left: 4px; }

.mention { background: rgba(88,101,242,0.3); color: #dee0fc; padding: 0 2px; border-radius: 3px; }

/* Drawing Canvas - Basic sizing */
canvas {
  background: #ffffff;
  cursor: crosshair;
  display: block;
  border: 1px solid #202225;
  max-width: 100%;
}

/* Channel / Server list specific text */
.channel-link { color: #8e9297; font-size: 16px; display: block; padding: 4px 0; }
.category-channel { color: #8e9297; font-weight: bold; font-size: 12px; text-transform: uppercase; margin-top: 16px; }