<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Discross - Menu</title>
    <style>
        @font-face {
            font-family: 'rodin';
            src: url('https://mariocube.com/css/RodinNTLGPro-DB-AlphaNum.woff2') format('woff2'),
                 url('https://mariocube.com/css/RodinNTLGPro-DB-AlphaNum.woff') format('woff');
            font-weight: 400;
        }

        @font-face {
            font-family: 'rodin';
            src: url('https://mariocube.com/css/RodinNTLGPro-B-AlphaNum.woff2') format('woff2'),
                 url('https://mariocube.com/css/RodinNTLGPro-B-AlphaNum.woff') format('woff');
            font-weight: 700;
        }

        html,
        body,
        #wrapper {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'rodin', Arial, Helvetica, sans-serif;
        }

        .light-theme #wrapper {
            background: #FFFFFF !important;
            color: #060607 !important;
        }

        .light-theme #wrapper * {
            color: #060607 !important;
        }
        
        /* Preserve explicit white colors in warning boxes and styled elements */
        .light-theme #wrapper font[color="#ffffff"] {
            color: #ffffff !important;
        }
        
        .light-theme #wrapper font[color="#ffffff"] * {
            color: #ffffff !important;
        }
        
        .light-theme a {
            color: #5865f2 !important;
        }
        
        .light-theme button,
        .light-theme #wrapper button {
            background: #5865f2 !important;
            color: #ffffff !important;
        }
        
        .light-theme hr {
            border-color: #e3e5e8 !important;
        }

        /* AMOLED theme overrides for server page */
        .amoled-theme #wrapper {
            background: #000000 !important;
            color: #ffffff !important;
        }

        .amoled-theme #wrapper * {
            background: #000000 !important;
            color: #ffffff !important;
        }

        .amoled-theme hr {
            border-color: #555555 !important;
        }

        .amoled-theme a {
            color: #5865f2 !important;
        }
        
        .amoled-theme button {
            background: #5865f2 !important;
            color: #ffffff !important;
        }

        hr {
            border: solid 1px #494c50;
        }
        
        /* Category collapsibility (#17) */
        .category-channels {
            display: block;
        }
        .category-channels.collapsed {
            display: none;
        }
        .category-arrow {
            display: inline-block;
            transition: transform 0.2s;
            font-size: 0.75em;
        }
        .category-arrow.collapsed {
            transform: rotate(-90deg);
        }
    </style>
    <script>
        // Category collapse/expand functionality (#17)
        function toggleCategory(element) {
            var arrow = element.querySelector('.category-arrow');
            // Find the category-channels div - it should be a sibling after potentially a BR
            var categoryDiv = null;
            var sibling = element.nextElementSibling;
            
            // Skip over BR tags to find the category-channels div
            while (sibling) {
                if (sibling.classList && sibling.classList.contains('category-channels')) {
                    categoryDiv = sibling;
                    break;
                }
                sibling = sibling.nextElementSibling;
            }
            
            if (categoryDiv) {
                var isCollapsed = categoryDiv.classList.toggle('collapsed');
                if (arrow) {
                    arrow.classList.toggle('collapsed', isCollapsed);
                }
                
                // Store state in localStorage
                try {
                    var categoryId = categoryDiv.id;
                    if (categoryId) {
                        localStorage.setItem(categoryId, isCollapsed ? 'collapsed' : 'expanded');
                    }
                } catch (e) {
                    // localStorage might not be available
                }
            }
        }
        
        // Restore category states on page load
        window.onload = function() {
            try {
                var categories = document.querySelectorAll('.category-channels');
                categories.forEach(function(cat) {
                    var state = localStorage.getItem(cat.id);
                    if (state === 'collapsed') {
                        cat.classList.add('collapsed');
                        
                        // Find the previous category link to update arrow
                        var prevSibling = cat.previousElementSibling;
                        while (prevSibling) {
                            if (prevSibling.tagName === 'A' && prevSibling.onclick) {
                                var arrow = prevSibling.querySelector('.category-arrow');
                                if (arrow) {
                                    arrow.classList.add('collapsed');
                                    break;
                                }
                            }
                            prevSibling = prevSibling.previousElementSibling;
                        }
                    }
                });
            } catch (e) {
                // localStorage might not be available
            }
        };
    </script>
</head>

<body bgcolor="#303338" {$WHITE_THEME_ENABLED}>
    <div id="wrapper">
        <table>
            <tbody>
                <tr>
                    <td valign="top" style="vertical-align: top; text-align: center;">
                        <a href="/server/"><img src="/resources/logo.gif" alt="Home"></a><br>
                        <hr noshade>
                        {$SERVER_LIST}
                    </td>
                    <td valign="top" style="vertical-align: top;">
                        {$DISCORD_NAME}

                        {$CHANNEL_LIST}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>

</html>