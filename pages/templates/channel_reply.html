<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#2b5797">
    <meta name="theme-color" content="#ffffff">
    <title>Discross - #{$CHANNEL_NAME}</title>
    <style>
        html,
        body,
        #wrapper {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        body {
            background: #36393f;
            color: #dcddde;
        }

        .light-theme #wrapper {
            background: #FFFFFF !important;
            color: #000000 !important;
        }

        br.nodisp {
            display: none
        }

        th {
            vertical-align: top;
            position: relative;
            top: 4px;
            text-align: left;
            font-weight: 400 !important
        }

        th.join {
            vertical-align: middle
        }

        hr {
            border-top: none;
            margin-bottom: 15px;
            border-bottom: solid 1px #393c40;
            border-left: solid 1px #393c40;
            border-right: solid 1px #393c40
        }

        table {
            padding-bottom: 5px
        }

        form table {
            height: auto;
            background: transparent;
            width: 100%;
            padding: 0;
            border: none;
        }

        a {
            color: #647dcd;
        }

        /* Discord-like Input Styling */
        .input-container {
            background: #383a40;
            border-radius: 8px;
            padding: 12px 16px;
            margin: 16px;
            border: 1px solid #484851;
        }

        .input-wrapper {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .message-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #dcddde;
            font-size: 16px;
            font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            line-height: 1.375;
            resize: none;
        }

        .message-input::placeholder {
            color: #72767d;
        }

        .message-input.disabled {
            background: #2f3136;
            color: #72767d;
            cursor: not-allowed;
        }

        .send-button {
            background: #5865f2;
            border: none;
            border-radius: 4px;
            color: white;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.17s ease;
            min-width: 60px;
        }

        .send-button:hover {
            background: #4752c4;
        }

        .send-button:active {
            background: #3c45a5;
        }

        /* Modern Form Layout */
        .message-form {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #36393f;
            border-top: 1px solid #484851;
            z-index: 100;
        }

        .form-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 16px;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            padding: 8px 16px;
            align-items: center;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.17s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(79, 84, 92, 0.32);
        }

        .action-icon {
            width: 24px;
            height: 24px;
        }

        /* Adjust main content to account for fixed form */
        #msgcontainer {
            padding-bottom: 120px;
        }

        /* Light theme overrides for inputs */
        .light-theme .input-container {
            background: #ebedef;
            border-color: #d4d7dc;
        }

        .light-theme .message-input {
            color: #2e3338;
        }

        .light-theme .message-input::placeholder {
            color: #6a7480;
        }

        .light-theme .message-input.disabled {
            background: #f2f3f5;
            color: #72767d;
        }

        .light-theme .message-form {
            background: #ffffff;
            border-top-color: #e3e5e8;
        }

        .light-theme .action-btn:hover {
            background: rgba(116, 127, 141, 0.08);
        }

        /* Remove underlines from message links and add Discord-style message formatting */
        .messagecontent a {
            text-decoration: none;
            color: inherit;
        }

        .message a {
            text-decoration: none;
            color: inherit;
        }

        .message .content a {
            text-decoration: none;
            color: inherit;
        }

        /* Discord-style blockquote styling */
        .discord-quote {
            border-left: 4px solid #4f545c;
            padding-left: 12px;
            margin-left: 0;
            color: #b5b5b5;
        }

        .light-theme .discord-quote {
            border-left-color: #c7ccd1;
            color: #6a7480;
        }

        /* Discord markdown styling for light theme */
        .light-theme .message div[style*="background: #2f3136"] {
            background: #f2f3f5 !important;
            border-color: #e3e5e8 !important;
            color: #2e3338 !important;
        }

        .light-theme .message span[style*="background: #2f3136"] {
            background: #f2f3f5 !important;
            color: #2e3338 !important;
        }

        /* Emoji styling */
        .emoji-inline {
            width: 20px !important;
            height: 20px !important;
            vertical-align: middle !important;
            margin: 0 1px;
        }

        .emoji-large {
            width: 48px !important;
            height: 48px !important;
            vertical-align: middle !important;
            margin: 2px;
        }

        .emoji-only .emoji-inline {
            width: 48px !important;
            height: 48px !important;
        }

        /* Mobile image fixes */
        @media (max-width: 768px) {
            .message img:not(.emoji-inline):not(.emoji-large) {
                max-width: 100% !important;
                height: auto !important;
                width: auto !important;
            }
        }

        /* Emoji toggle button */
        .emoji-toggle {
            background: #4f545c;
            border: none;
            color: #ffffff;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 11px;
            cursor: pointer;
            margin-left: 8px;
        }

        .emoji-toggle:hover {
            background: #5d6269;
        }

        .light-theme .emoji-toggle {
            background: #e3e5e8;
            color: #2e3338;
        }

        .light-theme .emoji-toggle:hover {
            background: #d4d7dc;
        }

        /* Discord-style message improvements */
        .message {
            padding: 8px 16px;
            margin: 0;
            border-radius: 0;
            transition: background-color 0.1s ease-in-out;
        }

        .message:hover {
            background: rgba(79, 84, 92, 0.08);
        }

        .message hr {
            display: none; /* Remove the old HR separators */
        }

        .message .name {
            font-weight: 500;
            font-size: 16px;
            cursor: pointer;
        }

        .message .date {
            font-size: 12px;
            color: #a3a6aa;
            margin-left: 8px;
            font-weight: 400;
        }

        .message .messagecontent {
            margin-top: 4px;
            line-height: 1.375;
            font-size: 16px;
            color: #dcddde;
        }

        .message table {
            width: 100%;
            padding: 0;
        }

        .message table td {
            padding: 0;
            vertical-align: top;
        }

        /* Light theme message improvements */
        .light-theme .message:hover {
            background: rgba(116, 127, 141, 0.06);
        }

        .light-theme .message .date {
            color: #5c6067;
        }

        .light-theme .message .messagecontent {
            color: #2e3338;
        }
    </style>
</head>

<body bgcolor="#303338" {$WHITE_THEME_ENABLED}>
    <div id="wrapper">
        <table>
            <tbody>
                <tr>
                    <td valign="top" style="vertical-align: top;">
                        <div class="links">
                            <a href="../server/{$SERVER_ID}"><img src="/resources/images/menu.gif" alt="Menu"
                                    style="position: fixed; top: 32px;left: 12px;"></a>
                            <br><img src="/resources/images/menuspacer.gif" alt=" " height="14px" width="32px" />
                        </div>
                        <br>
                    </td>
                    <td width="100%">
                        <div id="msgcontainer">
                            {$MESSAGES}
                        </div>

                        <div id="myList"></div> <!-- TODO: Remove -->
                        <!-- <br> -->
                        <div id="emoji" style="display: none;">
                            <table>
                                <tr>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :sob:'">
                                            <img src="/resources/twemoji/1f62d.gif" alt="sob"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :face_with_raised_eyebrow:'">
                                            <img src="/resources/twemoji/1f928.gif" alt="face_with_raised_eyebrow"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :skull:'">
                                            <img src="/resources/twemoji/1f480.gif" alt="skull"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :pleading_face:'">
                                            <img src="/resources/twemoji/1f97a.gif" alt="pleading_face"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :heart:'">
                                            <img src="/resources/twemoji/2764-fe0f.gif" alt="heart"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :thumbsup:'">
                                            <img src="/resources/twemoji/1f44d.gif" alt="thumbsup"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :thumbsdown:'">
                                            <img src="/resources/twemoji/1f44e.gif" alt="thumbsdown"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :pray:'">
                                            <img src="/resources/twemoji/1f64f.gif" alt="pray"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :tada:'">
                                            <img src="/resources/twemoji/1f389.gif" alt="tada"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                    <td>
                                        <button
                                            style="background: none; border: none; vertical-align: middle; width: 48px;"
                                            onclick="document.getElementById('message').value += ' :slight_smile:'">
                                            <img src="/resources/twemoji/1f642.gif" alt="slight_smile"
                                                style="width: 30px; height: 30px;">
                                        </button>
                                    </td>
                                </tr>
                            </table>

                        </div>
                        <a id="end" name="end"></a>
                        <div id="replying_to">
                            <div class="message">
                                <hr noshade="">
                                <br class="nodisp">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td valign="top" align="left" width="100%">
                                                <div class="content">

                                                    <font size="2" face="Arial, Helvetica, sans-serif" color="#dddddd">
                                                        Replying to "{$REPLY_MESSAGE_CONTENT}" from
                                                        {$REPLY_MESSAGE_AUTHOR}: </font>
                                                    <a href="./#end">
                                                        <font size="2" face="Arial, Helvetica, sans-serif"
                                                            color="#dddddd">
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cancel</font>
                                                    </a>
                                                </div>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    </div>
    <form action="../../reply" class="message-form">
        <input type="hidden" id="channel" name="channel" value="{$CHANNEL_ID}">
        <input type="hidden" id="reply_message_id" name="reply_message_id" value="{$REPLY_MESSAGE_ID}">
        <input type="hidden" id="lite" name="lite" value="False">
        <div class="form-content">
            {$INPUT}
            <div class="action-buttons">
                <button type="button" class="action-btn emoji-btn" onclick="showEmoji()" title="Add Emoji">
                    <img src="/resources/twemoji/{$RANDOM_EMOJI}.gif" alt="Emojis" class="action-icon">
                </button>
                <a href="../{$REFRESH_URL}" class="action-btn" title="Refresh">
                    <img src="/resources/images/refresh.gif" alt="Refresh" class="action-icon">
                </a>
            </div>
        </div>
    </form>
    </td>
    </tr>
    </tbody>
    </table>

    <script src="/connection.js"></script>
    </div>
</body>

</html>