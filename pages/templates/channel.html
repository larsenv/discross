<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Discross - #{$CHANNEL_NAME}</title>
    <script>
        window.onload = function () {
            // Basic scroll to bottom
            var end = document.getElementById("end");
            if (end) end.scrollIntoView();
        };

        var emojiShowing = false;
        function showEmoji() {
            var e = document.getElementById("emoji");
            if (emojiShowing) { e.style.display = "none"; emojiShowing = false; }
            else { e.style.display = "block"; emojiShowing = true; }
        }
    </script>
    <style>
        /* --- CORE WII OPTIMIZATIONS --- */
        @font-face { font-family: 'rodin'; src: url('https://mariocube.com/css/RodinNTLGPro-DB-AlphaNum.woff2') format('woff2'); }
        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; font-family: 'rodin', sans-serif; font-size: 16px; background: #36393f; color: #dcddde; }
        
        /* Layout Utils */
        .msg-c { padding-left: 60px; padding-bottom: 160px; }
        .d-none { display: none; }
        
        /* New Optimized Classes (Replaces Inline Styles) */
        .reply-box { margin-bottom: 4px; }
        .reply-hook { display: inline-block; width: 12px; height: 7px; border-left: 2px solid #4e5058; border-bottom: 2px solid #4e5058; margin-right: 5px; vertical-align: middle; margin-bottom: 4px; }
        .reply-txt { font-size: 12px; color: #b5bac1; vertical-align: middle; }
        .date-sep { margin: 24px 0; border-top: 1px solid #4e5058; text-align: center; font-size: 1px; line-height: 1px; height: 1px; }
        .date-lbl { background: #36393f; padding: 0 10px; color: #949ba4; font-size: 12px; font-weight: bold; position: relative; top: -10px; }
        .ping { color: #72767d; }
        
        /* Message Styling */
        .message { border-bottom: 1px solid #2f3136; padding: 8px 0; }
        .message:hover { background: rgba(4, 4, 5, 0.07); }
        .msg-auth { font-weight: 600; color: #fff; margin-right: 8px; cursor: pointer; }
        .msg-date { font-size: 12px; color: #72767d; }
        .msg-txt { line-height: 20px; word-wrap: break-word; }
        .msg-txt a { color: #00b0f4; text-decoration: none; }
        
        /* Inputs & UI */
        .input-bar { position: fixed; bottom: 0; width: 100%; background: #36393f; border-top: 1px solid #40444b; padding: 12px; z-index: 99; }
        input[type="text"] { background: #40444b; border: 1px solid #40444b; color: #dcddde; padding: 10px; width: 100%; border-radius: 8px; }
        .btn { background: #5865f2; color: #fff; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; }
        
        /* Images */
        .tenor { max-width: 100%; border-radius: 4px; display: block; margin-top: 4px; }
        .sticker { width: 150px; height: 150px; display: block; margin-top: 4px; }
        .emoji { width: 1.375em; height: 1.375em; vertical-align: -0.2em; }
        .emoji-jumbo { width: 2.75em; height: 2.75em; }

        /* Legacy support */
        .menu-button { position: fixed; top: 16px; left: 16px; z-index: 1000; }
        
        /* Light/Amoled Themes */
        .light-theme body { background: #fff !important; color: #2e3338 !important; }
        .light-theme .message { border-color: #e3e5e8 !important; }
        .light-theme .input-bar { background: #fff !important; border-top-color: #e3e5e8 !important; }
        .light-theme input[type="text"] { background: #ebedef; color: #060607; }
        
        .amoled-theme body { background: #000 !important; color: #fff !important; }
        .amoled-theme .message { border-color: #333 !important; background: #000 !important; }
        .amoled-theme .input-bar { background: #000 !important; border-top-color: #333 !important; }
        .amoled-theme input[type="text"] { background: #0a0a0a; color: #fff; }
    </style>
</head>

<body {$WHITE_THEME_ENABLED}>
    <div id="wrapper">
        <a href="../server/{$SERVER_ID}" class="menu-button">
            <img src="/resources/images/menu.gif" alt="Menu" width="24" height="24">
        </a>

        <div class="msg-c">
            <div id="msgcontainer">
                {$MESSAGES}
            </div>

            <div id="emoji" style="display: none; background: #2f3136; border: 1px solid #40444b; padding: 10px; margin: 10px 0;">
                <button type="button" onclick="document.getElementById('message').value += ' :sob:'">üò≠</button>
                <button type="button" onclick="document.getElementById('message').value += ' :skull:'">üíÄ</button>
                <button type="button" onclick="document.getElementById('message').value += ' :heart:'">‚ù§Ô∏è</button>
                <button type="button" onclick="document.getElementById('message').value += ' :thumbsup:'">üëç</button>
            </div>

            <a id="end" name="end"></a>
        </div>

        <div class="input-bar">
            <form action="../send">
                <table width="100%">
                    <tr>
                        <td width="40"><img src="/resources/twemoji/{$RANDOM_EMOJI}.gif" onclick="showEmoji()" width="24" style="cursor:pointer"></td>
                        <td width="40"><a href="{$REFRESH_URL}"><img src="/resources/images/refresh.gif" width="24"></a></td>
                        <td>
                            <input type="hidden" name="channel" value="{$CHANNEL_ID}">
                            {$INPUT}
                        </td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
</body>
</html>
